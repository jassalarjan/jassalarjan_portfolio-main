import{r as t,j as m,L as Y}from"./components-BUzCadR4.js";import{c as M,a as F,n as B}from"./style-ub7q8joN.js";import{T as Z,u as ee}from"./heading-DrFkACAp.js";import{a as D,f as te,b as ne,u as A}from"./use-reduced-motion-COWaI8BS.js";const se="_icon_1tdl1_2",re={icon:se},oe="/assets/icons-CLenu7_4.svg",K=t.forwardRef(({icon:e,className:s,size:n,...r},c)=>m.jsx("svg",{"aria-hidden":!0,ref:c,className:M(re.icon,s),width:n||24,height:n||24,...r,children:m.jsx("use",{href:`${oe}#${e}`})})),G=t.createContext(null),ae=t.createContext({});function ce(){const e=t.useContext(G);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:n,register:r}=e,c=t.useId();return t.useEffect(()=>r(c),[]),!s&&n?[!1,()=>n&&n(c)]:[!0]}function O(){const e=t.useRef(!1);return D(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ue(){const e=O(),[s,n]=t.useState(0),r=t.useCallback(()=>{e.current&&n(s+1)},[s]);return[t.useCallback(()=>te.postRender(r),[r]),s]}class ie extends t.Component{getSnapshotBeforeUpdate(s){const n=this.props.childRef.current;if(n&&s.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function le({children:e,isPresent:s}){const n=t.useId(),r=t.useRef(null),c=t.useRef({width:0,height:0,top:0,left:0});return t.useInsertionEffect(()=>{const{width:a,height:o,top:u,left:d}=c.current;if(s||!r.current||!a||!o)return;r.current.dataset.motionPopId=n;const f=document.createElement("style");return document.head.appendChild(f),f.sheet&&f.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(f)}},[s]),t.createElement(ie,{isPresent:s,childRef:r,sizeRef:c},t.cloneElement(e,{ref:r}))}const V=({children:e,initial:s,isPresent:n,onExitComplete:r,custom:c,presenceAffectsLayout:a,mode:o})=>{const u=ne(de),d=t.useId(),f=t.useMemo(()=>({id:d,initial:s,isPresent:n,custom:c,onExitComplete:i=>{u.set(i,!0);for(const l of u.values())if(!l)return;r&&r()},register:i=>(u.set(i,!1),()=>u.delete(i))}),a?void 0:[n]);return t.useMemo(()=>{u.forEach((i,l)=>u.set(l,!1))},[n]),t.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(e=t.createElement(le,{isPresent:n},e)),t.createElement(G.Provider,{value:f},e)};function de(){return new Map}function fe(e){return t.useEffect(()=>()=>e(),[])}const I=e=>e.key||"";function me(e,s){e.forEach(n=>{const r=I(n);s.set(r,n)})}function pe(e){const s=[];return t.Children.forEach(e,n=>{t.isValidElement(n)&&s.push(n)}),s}const he=({children:e,custom:s,initial:n=!0,onExitComplete:r,exitBeforeEnter:c,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const u=t.useContext(ae).forceRender||ue()[0],d=O(),f=pe(e);let i=f;const l=t.useRef(new Map).current,g=t.useRef(i),x=t.useRef(new Map).current,_=t.useRef(!0);if(D(()=>{_.current=!1,me(f,x),g.current=i}),fe(()=>{_.current=!0,x.clear(),l.clear()}),_.current)return t.createElement(t.Fragment,null,i.map(p=>t.createElement(V,{key:I(p),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:a,mode:o},p)));i=[...i];const y=g.current.map(I),R=f.map(I),C=y.length;for(let p=0;p<C;p++){const h=y[p];R.indexOf(h)===-1&&!l.has(h)&&l.set(h,void 0)}return o==="wait"&&l.size&&(i=[]),l.forEach((p,h)=>{if(R.indexOf(h)!==-1)return;const b=x.get(h);if(!b)return;const j=y.indexOf(h);let v=p;if(!v){const $=()=>{l.delete(h);const P=Array.from(x.keys()).filter(E=>!R.includes(E));if(P.forEach(E=>x.delete(E)),g.current=f.filter(E=>{const L=I(E);return L===h||P.includes(L)}),!l.size){if(d.current===!1)return;u(),r&&r()}};v=t.createElement(V,{key:I(b),isPresent:!1,onExitComplete:$,custom:s,presenceAffectsLayout:a,mode:o},b),l.set(h,v)}i.splice(j,0,v)}),i=i.map(p=>{const h=p.key;return l.has(h)?p:t.createElement(V,{key:I(p),isPresent:!0,presenceAffectsLayout:a,mode:o},p)}),t.createElement(t.Fragment,null,l.size?i:i.map(p=>t.cloneElement(p)))},ge="_loader_1o1zt_2",xe="_text_1o1zt_17",_e="_span_1o1zt_43",ye="_loaderSpan_1o1zt_1",U={loader:ge,text:xe,span:_e,loaderSpan:ye},ve=t.forwardRef(({className:e,style:s,width:n=32,height:r=4,text:c="Loading...",center:a,...o},u)=>A()?m.jsx(Z,{className:M(U.text,e),weight:"medium",...o,children:c}):m.jsx("div",{ref:u,className:M(U.loader,e),"data-center":a,style:F({width:n,height:r},s),...o,children:m.jsx("div",{className:U.span})})),Re=({children:e,in:s,unmount:n,initial:r=!0,...c})=>{const a=t.useRef(),o=t.useRef();return t.useEffect(()=>{clearTimeout(s?o.current:a.current)},[s]),m.jsx(he,{children:(s||!n)&&m.jsx(Ce,{enterTimeout:a,exitTimeout:o,in:s,initial:r,...c,children:e})})},Ce=({children:e,timeout:s=0,enterTimeout:n,exitTimeout:r,onEnter:c,onEntered:a,onExit:o,onExited:u,initial:d,nodeRef:f,in:i})=>{const[l,g]=t.useState(d?"exited":"entered"),[x,_]=ce(),[y,R]=t.useState(!d),C=typeof s=="object",p=t.useRef(null),h=f||p,b=y&&i?x:!1;return t.useEffect(()=>{var v;if(y||!i)return;const j=C?s.enter:s;clearTimeout(n.current),clearTimeout(r.current),R(!0),g("entering"),c==null||c(),(v=h.current)==null||v.offsetHeight,n.current=setTimeout(()=>{g("entered"),a==null||a()},j)},[c,a,s,l,i]),t.useEffect(()=>{var v;if(x&&i)return;const j=C?s.exit:s;clearTimeout(n.current),clearTimeout(r.current),g("exiting"),o==null||o(),(v=h.current)==null||v.offsetHeight,r.current=setTimeout(()=>{g("exited"),_==null||_(),u==null||u()},j)},[x,o,_,s,u,i]),e({visible:b,status:l,nodeRef:h})},be="_button_8clau_2",je="_text_8clau_134",Se="_loader_8clau_147",Ee="_icon_8clau_160",k={button:be,text:je,loader:Se,icon:Ee};function q(e){return e==null?void 0:e.includes("://")}const Ie=t.forwardRef(({href:e,...s},n)=>q(e)||!e?m.jsx(H,{href:e,ref:n,...s}):m.jsx(H,{unstable_viewTransition:!0,as:Y,prefetch:"intent",to:e,ref:n,...s})),H=t.forwardRef(({className:e,as:s,secondary:n,loading:r,loadingText:c="loading",icon:a,iconEnd:o,iconHoverShift:u,iconOnly:d,children:f,rel:i,target:l,href:g,disabled:x,..._},y)=>{const R=q(g),p=s||(g?"a":"button");return m.jsxs(p,{className:M(k.button,e),"data-loading":r,"data-icon-only":d,"data-secondary":n,"data-icon":a,href:g,rel:i||R?"noopener noreferrer":void 0,target:l||R?"_blank":void 0,disabled:x,ref:y,..._,children:[!!a&&m.jsx(K,{className:k.icon,"data-start":!d,"data-shift":u,icon:a}),!!f&&m.jsx("span",{className:k.text,children:f}),!!o&&m.jsx(K,{className:k.icon,"data-end":!d,"data-shift":u,icon:o}),m.jsx(Re,{unmount:!0,in:r,children:({visible:h,nodeRef:b})=>m.jsx(ve,{ref:b,className:k.loader,size:32,text:c,"data-visible":h})})]})});function we(){const[e,s]=t.useState(!1);return t.useEffect(()=>{s(!0)},[]),e}function Pe(e,s,n={},r=!0){const[c,a]=t.useState(!1),[o,u]=t.useState(!1);return t.useEffect(()=>{if(!(e!=null&&e.current))return;const d=new IntersectionObserver(([f])=>{const{isIntersecting:i,target:l}=f;a(i),i&&s&&(d.unobserve(l),u(!0))},n);return!o&&r&&d.observe(e.current),()=>d.disconnect()},[e,s,n,o,r]),c}async function Te({src:e,srcSet:s,sizes:n}){return new Promise((r,c)=>{try{if(!e&&!s)throw new Error("No image src or srcSet provided");let a=new Image;e&&(a.src=e),s&&(a.srcset=s),n&&(a.sizes=n);const o=()=>{a.removeEventListener("load",o);const u=a.currentSrc;a=null,r(u)};a.addEventListener("load",o)}catch(a){c(`Error loading ${s}: ${a}`)}})}async function ke(e=1,s=1){return new Promise(n=>{const r=document.createElement("canvas"),c=r.getContext("2d");r.width=e,r.height=s,c.fillStyle="rgba(0, 0, 0, 0)",c.fillRect(0,0,e,s),r.toBlob(async a=>{if(!a)throw new Error("Video thumbnail failed to load");const o=URL.createObjectURL(a);r.remove(),n(o)})})}async function Me({srcSet:e,sizes:s}){const n=await Promise.all(e.split(", ").map(async o=>{const[u,d]=o.split(" "),f=Number(d.replace("w","")),i=await ke(f);return{src:u,image:i,width:d}})),r=n.map(({image:o,width:u})=>`${o} ${u}`).join(", "),c=await Te({srcSet:r,sizes:s});return n.find(o=>o.image===c).src}const $e="_image_1rksn_2",Le="_container_1rksn_42",Ne="_elementWrapper_1rksn_49",ze="_placeholder_1rksn_71",Fe="_element_1rksn_49",Ve="_button_1rksn_104",w={image:$e,container:Le,elementWrapper:Ne,placeholder:ze,element:Fe,button:Ve},De=({className:e,style:s,reveal:n,delay:r=0,raised:c,src:a,srcSet:o,placeholder:u,...d})=>{const[f,i]=t.useState(!1),{theme:l}=ee(),g=t.useRef(),x=a||o.split(" ")[0],_=Pe(g,!J(x)),y=t.useCallback(()=>{i(!0)},[]);return m.jsx("div",{className:M(w.image,e),"data-visible":_||f,"data-reveal":n,"data-raised":c,"data-theme":l,style:F({delay:B(r)},s),ref:g,children:m.jsx(Ue,{delay:r,onLoad:y,loaded:f,inViewport:_,reveal:n,src:x,srcSet:o,placeholder:u,...d})})},Ue=({onLoad:e,loaded:s,inViewport:n,srcSet:r,placeholder:c,delay:a,src:o,alt:u,play:d=!0,restartOnPause:f,reveal:i,sizes:l,width:g,height:x,noPauseButton:_,cover:y,...R})=>{const C=A(),[p,h]=t.useState(!0),[b,j]=t.useState(!C),[v,$]=t.useState(),[P,E]=t.useState(!1),L=t.useRef(),S=t.useRef(),T=J(o),W=n,Q=we();t.useEffect(()=>{T&&r?(async()=>{const z=await Me({srcSet:r,sizes:l});$(z)})():T&&$(o)},[T,l,o,r]),t.useEffect(()=>{if(!S.current||!v)return;const N=()=>{j(!0),S.current.play()},z=()=>{j(!1),S.current.pause()};d||(z(),f&&(S.current.currentTime=0)),!P&&(n?n&&!C&&d&&N():z())},[n,d,C,f,P,v]);const X=N=>{N.preventDefault(),E(!0),S.current.paused?(j(!0),S.current.play()):(j(!1),S.current.pause())};return m.jsxs("div",{className:w.elementWrapper,"data-reveal":i,"data-visible":n||s,style:F({delay:B(a+1e3)}),children:[T&&Q&&m.jsxs(t.Fragment,{children:[m.jsx("video",{muted:!0,loop:!0,playsInline:!0,className:w.element,"data-loaded":s,"data-cover":y,autoPlay:!C,onLoadStart:e,src:v,"aria-label":u,ref:S,...R}),!_&&m.jsxs(Ie,{className:w.button,onClick:X,children:[m.jsx(K,{icon:b?"pause":"play"}),b?"Pause":"Play"]})]}),!T&&m.jsx("img",{className:w.element,"data-loaded":s,"data-cover":y,onLoad:e,decoding:"async",src:W?o:void 0,srcSet:W?r:void 0,width:g,height:x,alt:u,sizes:l,...R}),p&&m.jsx("img",{"aria-hidden":!0,className:w.placeholder,"data-loaded":s,"data-cover":y,style:F({delay:B(a)}),ref:L,src:c,width:g,height:x,onTransitionEnd:()=>h(!1),decoding:"async",loading:"lazy",alt:"",role:"presentation"})]})};function J(e){return typeof e=="string"&&e.includes(".mp4")}export{he as A,Ie as B,De as I,ae as L,G as P,Re as T,K as a,ce as b,ve as c,Pe as u};
