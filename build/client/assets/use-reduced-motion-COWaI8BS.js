import{r as m}from"./components-BUzCadR4.js";const w=typeof document<"u",A=w?m.useLayoutEffect:m.useEffect;class R{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const r=this.order.indexOf(e);r!==-1&&(this.order.splice(r,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function P(s){let e=new R,r=new R,o=0,n=!1,a=!1;const l=new WeakSet,d={schedule:(c,i=!1,f=!1)=>{const t=f&&n,u=t?e:r;return i&&l.add(c),u.add(c)&&t&&n&&(o=e.order.length),c},cancel:c=>{r.remove(c),l.delete(c)},process:c=>{if(n){a=!0;return}if(n=!0,[e,r]=[r,e],r.clear(),o=e.order.length,o)for(let i=0;i<o;i++){const f=e.order[i];l.has(f)&&(d.schedule(f),s()),f(c)}n=!1,a&&(a=!1,d.process(c))}};return d}const h=["prepare","read","update","preRender","render","postRender"],S=40;function y(s,e){let r=!1,o=!0;const n={delta:0,timestamp:0,isProcessing:!1},a=h.reduce((t,u)=>(t[u]=P(()=>r=!0),t),{}),l=t=>{a[t].process(n)},d=()=>{const t=performance.now();r=!1,n.delta=o?1e3/60:Math.max(Math.min(t-n.timestamp,S),1),n.timestamp=t,n.isProcessing=!0,h.forEach(l),n.isProcessing=!1,r&&e&&(o=!1,s(d))},c=()=>{r=!0,o=!0,n.isProcessing||s(d)};return{schedule:h.reduce((t,u)=>{const g=a[u];return t[u]=(x,E=!1,F=!1)=>(r||c(),g.schedule(x,E,F)),t},{}),cancel:t=>h.forEach(u=>a[u].cancel(t)),state:n,steps:a}}function B(s){const e=m.useRef(null);return e.current===null&&(e.current=s()),e.current}const L=s=>s,{schedule:C,cancel:O,state:Q,steps:T}=y(typeof requestAnimationFrame<"u"?requestAnimationFrame:L,!0),p={current:null},M={current:!1};function q(){if(M.current=!0,!!w)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>p.current=s.matches;s.addListener(e),e()}else p.current=!1}function D(){!M.current&&q();const[s]=m.useState(p.current);return s}export{A as a,B as b,O as c,Q as d,y as e,C as f,q as g,M as h,w as i,L as n,p,T as s,D as u};
